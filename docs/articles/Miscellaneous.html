<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Miscellaneous • ggh4x</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Miscellaneous">
<meta property="og:description" content="ggh4x">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggh4x</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggh4x.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Facets.html">Facets</a>
    </li>
    <li>
      <a href="../articles/Miscellaneous.html">Miscellaneous</a>
    </li>
    <li>
      <a href="../articles/PositionGuides.html">Position Guides</a>
    </li>
    <li>
      <a href="../articles/Statistics.html">Statistics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/teunbrand/ggh4x/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Miscellaneous_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="Miscellaneous_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="Miscellaneous_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Miscellaneous</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/teunbrand/ggh4x/blob/master/vignettes/Miscellaneous.Rmd"><code>vignettes/Miscellaneous.Rmd</code></a></small>
      <div class="hidden name"><code>Miscellaneous.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/teunbrand/ggh4x">ggh4x</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: ggplot2</span></code></pre></div>
<p>There are some other, smaller additions in ggh4x that aren’t really covered in the other vignettes.</p>
<div id="multiple-colour-scales" class="section level1">
<h1 class="hasAnchor">
<a href="#multiple-colour-scales" class="anchor"></a>Multiple colour scales</h1>
<p>One colour scale is sometimes not enough to describe your data. You can map several variables to colours with <code><a href="../reference/scale_fill_multi.html">scale_colour_multi()</a></code> if data are in separate layers. It works like <code>scale_colour_gradientn()</code>, but you can declare the aesthetics to and provide other arguments in a vectorised way, parallel to the <code>aesthetics</code> argument. In the example below, a <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> of colours is given, where the 1 list elements becomes the argument of the first scale, the 2nd list element goes to the second scale and so on. Other arguments that expect input of length one can be given as a vector.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Separating layers by species and declaring (yet) unknown aesthetics</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">iris</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">Sepal.Width</span>, <span class="va">Sepal.Length</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>swidth <span class="op">=</span> <span class="va">Sepal.Width</span><span class="op">)</span>,
             data <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"setosa"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>pleng <span class="op">=</span> <span class="va">Petal.Length</span><span class="op">)</span>,
             data <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"versicolor"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>pwidth <span class="op">=</span> <span class="va">Petal.Width</span><span class="op">)</span>,
             data <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"virginica"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">Species</span>, scales <span class="op">=</span> <span class="st">"free_x"</span><span class="op">)</span>
<span class="co">#&gt; Warning: Ignoring unknown aesthetics: swidth</span>
<span class="co">#&gt; Warning: Ignoring unknown aesthetics: pleng</span>
<span class="co">#&gt; Warning: Ignoring unknown aesthetics: pwidth</span>

<span class="co"># This generated quite some warnings, but this is no reason to worry!</span>

<span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/scale_fill_multi.html">scale_colour_multi</a></span><span class="op">(</span>
  aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"swidth"</span>, <span class="st">"pleng"</span>, <span class="st">"pwidth"</span><span class="op">)</span>,
  <span class="co"># Providing colours as a list distributes list-elements over different scales</span>
  colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"green"</span><span class="op">)</span>,
                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gray"</span>,  <span class="st">"red"</span><span class="op">)</span>,
                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"blue"</span><span class="op">)</span><span class="op">)</span>,
  guide <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">guide_colourbar</span><span class="op">(</span>barheight <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">35</span>, <span class="st">"pt"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-2-1.png" width="384"></p>
<p>You can combine continuous and discrete colour scales with the slightly more verbose <code><a href="../reference/scale_listed.html">scale_listed()</a></code>. We can illustrate this with a heatmap, wherein we maybe want to use a discrete fill for some annotation, but a continuous fill for the heatmap values. The example below also includes <code><a href="../reference/geom_rectmargin.html">geom_tilemargin()</a></code>, which conveniently can annotate heatmaps in the margin of a plot.</p>
<p>We can provide the correct fill scales as a list, as long as we match up the new aesthetics in the scales themselves and declare which old aesthetic they are to replace.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Reshaping the iris dataset for heatmap purposes</span>
<span class="va">iriscor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">iriscor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/row.html">row</a></span><span class="op">(</span><span class="va">iriscor</span><span class="op">)</span><span class="op">)</span>,
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/col.html">col</a></span><span class="op">(</span><span class="va">iriscor</span><span class="op">)</span><span class="op">)</span>,
  correlation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="va">iriscor</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">iris_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">iris</span>, id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Setting up the heatmap</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">iris_df</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">id</span>, <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_rectmargin.html">geom_tilemargin</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>species <span class="op">=</span> <span class="va">Species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_raster</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cor <span class="op">=</span> <span class="va">correlation</span><span class="op">)</span>,
              data <span class="op">=</span> <span class="va">iriscor</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Warning: Ignoring unknown aesthetics: species</span>
<span class="co">#&gt; Warning: Ignoring unknown aesthetics: cor</span>

<span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/scale_listed.html">scale_listed</a></span><span class="op">(</span>scalelist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="fu">scale_fill_distiller</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"RdBu"</span>, aesthetics <span class="op">=</span> <span class="st">"cor"</span><span class="op">)</span>,
  <span class="fu">scale_fill_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span>, aesthetics <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span>
<span class="op">)</span>, replaces <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fill"</span>, <span class="st">"fill"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-3-1.png" width="384"></p>
</div>
<div id="string-legends" class="section level1">
<h1 class="hasAnchor">
<a href="#string-legends" class="anchor"></a>String legends</h1>
<p>A simple but effective way to illustrate a straightforward mapping of <code>colour</code> or <code>fill</code> aesthetics, is to use coloured text. In ggh4x, you can do this by setting <code>guide = "stringlegend"</code> as argument to colour and fill scales, or set <code>guides(colour = "stringlegend")</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">price</span>, <span class="va">carat</span>, colour <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_colour_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Dark2"</span>, guide <span class="op">=</span> <span class="st">"stringlegend"</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-4-1.png" width="384"></p>
<p>These legends do not have any keys, so key-related options are absent when you use <code><a href="../reference/guide_stringlegend.html">guide_stringlegend()</a></code>. However, a few label related options like <code>family</code>, <code>face</code>, <code>size</code> have been added, as well as options to control the spacing between the labels through <code>spacing</code>/<code>spacing.x</code>/<code>spacing.y</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">mpg</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span>

<span class="va">p</span> <span class="op">+</span> <span class="fu">guides</span><span class="op">(</span>colour <span class="op">=</span> <span class="fu"><a href="../reference/guide_stringlegend.html">guide_stringlegend</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, spacing <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span>

<span class="va">p</span> <span class="op">+</span> <span class="fu">guides</span><span class="op">(</span>colour <span class="op">=</span> <span class="fu"><a href="../reference/guide_stringlegend.html">guide_stringlegend</a></span><span class="op">(</span>spacing.x <span class="op">=</span> <span class="fl">0</span>, spacing.y <span class="op">=</span> <span class="fl">5</span>,
                                       family <span class="op">=</span> <span class="st">"mono"</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-5-1.png" width="288"><img src="Miscellaneous_files/figure-html/unnamed-chunk-5-2.png" width="288"></p>
</div>
<div id="point-paths" class="section level1">
<h1 class="hasAnchor">
<a href="#point-paths" class="anchor"></a>Point paths</h1>
<p>The return of the good old <code>type = 'b'</code> plot from base R! This geom makes point connected through a line that starts and ends a small distance from the points themselves. Calculating these small offsets in absolute coordinates instead of data coordinates means they are stable at different aspect ratios.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">pressure</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">temperature</span>, <span class="va">pressure</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_pointpath.html">geom_pointpath</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">p</span> <span class="op">+</span> <span class="fu">theme</span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>
<span class="va">p</span> <span class="op">+</span> <span class="fu">theme</span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-6-1.png" width="288"><img src="Miscellaneous_files/figure-html/unnamed-chunk-6-2.png" width="288"></p>
<p>The size of the small offset can be controlled with the <code>mult</code> multiplier argument, but is otherwise dependant on the average of on the <code>linesize</code> aesthetic for stroke size and <code>size</code> aesthetic for point size. Also note that the connecting lines disappear when points are spaced closely together.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">pressure</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">temperature</span>, <span class="va">pressure</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_pointpath.html">geom_pointpath</a></span><span class="op">(</span>linesize <span class="op">=</span> <span class="fl">2</span>, size <span class="op">=</span> <span class="fl">2</span>, mult <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-7-1.png" width="384"></p>
<p>An added bonus is that we can also use this point path in cartesian coordinates to get consistent curves.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu">coord_polar</span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-8-1.png" width="384"></p>
</div>
<div id="polygon-rasters" class="section level1">
<h1 class="hasAnchor">
<a href="#polygon-rasters" class="anchor"></a>Polygon rasters</h1>
<p>When you want to do more with rasters than just displaying them, the <code>geom_raster()</code> and related tile- and rect geoms can be a bit inflexible. To allow transformations of rasters, there is <code><a href="../reference/geom_polygonraster.html">geom_polygonraster()</a></code>, which reparameterises the raster into <code>x</code> and <code>y</code> parameterised polygons. This is less efficient than the regular raster, but more flexible. With <code><a href="../reference/position_lineartrans.html">position_lineartrans()</a></code> you can perform linear transformations on the coordinates.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/row.html">row</a></span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span><span class="op">)</span>,
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/col.html">col</a></span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span><span class="op">)</span>,
  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, fill <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_fill_viridis_c</span><span class="op">(</span>guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span>

<span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_polygonraster.html">geom_polygonraster</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="../reference/position_lineartrans.html">position_lineartrans</a></span><span class="op">(</span>shear <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span>

<span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_polygonraster.html">geom_polygonraster</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="../reference/position_lineartrans.html">position_lineartrans</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span>

<span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_polygonraster.html">geom_polygonraster</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">coord_polar</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-9-1.png" width="288"><img src="Miscellaneous_files/figure-html/unnamed-chunk-9-2.png" width="288"><img src="Miscellaneous_files/figure-html/unnamed-chunk-9-3.png" width="288"></p>
</div>
<div id="aiming-text" class="section level1">
<h1 class="hasAnchor">
<a href="#aiming-text" class="anchor"></a>Aiming text</h1>
<p>You might sometimes want to put text in a plot at a particular angle. You might want to annotate something ‘away’ from something else, in which case it can sometimes be a bit of a pain to calculate the correct angle, only to conclude that after resizing the plot that the angle was not correct. With <code><a href="../reference/geom_text_aimed.html">geom_text_aimed()</a></code> the text is rotated by an angle parallel to a line going from the text’s <code>[x,y]</code> coordinate through some point in <code>[xend,yend]</code>. In the example below, we ‘aim’ the text at the middle of the plot.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">mtcars</span>, car <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>, 
       <span class="fu">aes</span><span class="op">(</span><span class="va">mpg</span>, <span class="va">wt</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_text_aimed.html">geom_text_aimed</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">car</span><span class="op">)</span>, 
                  hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span>, size <span class="op">=</span> <span class="fl">3</span>,
                  xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span>,
                  yend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">wt</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_cartesian</span><span class="op">(</span>clip <span class="op">=</span> <span class="st">"off"</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-10-1.png" width="384"></p>
<p>While the example above might be a bit silly, it might be easier to show the usefulness when trying to annotate pieces of a polar coordinates chart. Specifically for these kinds of charts, the default <code>[xend,yend]</code> position is at <code>[-Inf, Inf]</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">mpg</span>, <span class="fu">aes</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span>show.legend <span class="op">=</span> <span class="cn">FALSE</span>, position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_text_aimed.html">geom_text_aimed</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1.2</span>, label <span class="op">=</span> <span class="va">class</span>, group <span class="op">=</span> <span class="va">class</span><span class="op">)</span>,
                  position <span class="op">=</span> <span class="fu">position_fill</span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,
                  stat <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_polar</span><span class="op">(</span><span class="st">"y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-11-1.png" width="384"></p>
<p>When specifying an angle in the geom, the calculated angle is added, such that <code>angle = 90</code> means that the text will become perpendicular to the point defined in <code>[xend, yend]</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">cut</span>, fill <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_text_aimed.html">geom_text_aimed</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">cut</span>, group <span class="op">=</span> <span class="va">cut</span><span class="op">)</span>,
                  angle <span class="op">=</span> <span class="fl">90</span>,
                  stat <span class="op">=</span> <span class="st">"count"</span>, nudge_y <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_discrete</span><span class="op">(</span>labels <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_polar</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="Miscellaneous_files/figure-html/unnamed-chunk-12-1.png" width="384"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Teun van den Brand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>

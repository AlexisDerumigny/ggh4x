<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Position Guides â€¢ ggh4x</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Position Guides">
<meta property="og:description" content="ggh4x">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggh4x</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Facets.html">Facets</a>
    </li>
    <li>
      <a href="../articles/PositionGuides.html">Position Guides</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/teunbrand/ggh4x/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Position Guides</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/teunbrand/ggh4x/blob/master/vignettes/PositionGuides.Rmd"><code>vignettes/PositionGuides.Rmd</code></a></small>
      <div class="hidden name"><code>PositionGuides.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggh4x</span>)
<span class="co">#&gt; Loading required package: ggplot2</span></pre></body></html></div>
<p>The ggh4x package defines a few new position guides that can take the place of the default x- and y-axes.</p>
<div id="minor-ticks" class="section level1">
<h1 class="hasAnchor">
<a href="#minor-ticks" class="anchor"></a>Minor ticks</h1>
<p>One of the simplest modifications to the axis guide is to also place ticks at places where the minor breaks are.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>)) +
  <span class="fu">geom_point</span>() +
  <span class="fu">scale_x_continuous</span>(
    <span class="kw">minor_breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">2</span>, <span class="fl">4</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fl">0.2</span>),
    <span class="kw">guide</span> <span class="kw">=</span> <span class="st">"axis_minor"</span>
  )</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-2-1.png" width="384"></p>
<p>The minor ticks axis, like any position guide, can be set inside the <code>guides()</code> or <code>scale_(x/y)_*()</code> functions. They can be referred to as <code>"axis_minor"</code> for the default, or <code><a href="../reference/guide_axis_minor.html">guide_axis_minor()</a></code> if extra tweaks are required.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">g</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>)) +
  <span class="fu">geom_point</span>()

<span class="co"># The following are equivalent:</span>
<span class="no">g</span> + <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"axis_minor"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"axis_minor"</span>)

<span class="no">g</span> + <span class="fu">scale_x_continuous</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="st">"axis_minor"</span>) +
  <span class="fu">scale_y_continuous</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="st">"axis_minor"</span>)

<span class="co"># If you need to set extra options you can use the `guide_axis_minor()` function.</span>
<span class="no">g</span> + <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_axis_minor.html">guide_axis_minor</a></span>(<span class="kw">angle</span> <span class="kw">=</span> <span class="fl">45</span>),
           <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_axis_minor.html">guide_axis_minor</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"I am a Y-axis"</span>))

<span class="no">g</span> + <span class="fu">scale_x_continuous</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_axis_minor.html">guide_axis_minor</a></span>(<span class="kw">angle</span> <span class="kw">=</span> <span class="fl">45</span>)) +
  <span class="fu">scale_y_continuous</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_axis_minor.html">guide_axis_minor</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"I am a Y-axis"</span>))</pre></body></html></div>
<p>The length of the minor ticks are controlled by the <code>ggh4x.axis.ticks.length.minor</code> theme element, and are specified relative to the major ticks.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">mtcars</span>, <span class="fu">aes</span>(<span class="no">wt</span>, <span class="no">mpg</span>)) +
  <span class="fu">geom_point</span>() +
  <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"axis_minor"</span>) +
  <span class="fu">theme</span>(<span class="kw">axis.ticks.length.x</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),
        <span class="kw">ggh4x.axis.ticks.length.minor</span> <span class="kw">=</span> <span class="fu">rel</span>(<span class="fl">0.5</span>))</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-4-1.png" width="384"></p>
</div>
<div id="logarithmic-ticks" class="section level1">
<h1 class="hasAnchor">
<a href="#logarithmic-ticks" class="anchor"></a>Logarithmic ticks</h1>
<p>A variation on the minor ticks is placing ticks for logarithmic axes. A thing to note is that these work best log<sub>10</sub> transformations. The ticks now come in three lengths, the major length, the minor length and what is referred to â€˜miniâ€™ length. Like with the minor ticks, the mini ticks are also defined relative to the major ticks.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">pressure</span>, <span class="fu">aes</span>(<span class="no">temperature</span>, <span class="no">pressure</span>)) +
  <span class="fu">geom_line</span>() +
  <span class="fu">scale_y_log10</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="st">"axis_logticks"</span>) +
  <span class="fu">theme</span>(<span class="kw">axis.ticks.length.y</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),
        <span class="kw">ggh4x.axis.ticks.length.minor</span> <span class="kw">=</span> <span class="fu">rel</span>(<span class="fl">0.5</span>),
        <span class="kw">ggh4x.axis.ticks.length.mini</span> <span class="kw">=</span> <span class="fu">rel</span>(<span class="fl">0.2</span>))</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-5-1.png" width="384"></p>
<p>A difference with the <code>annotation_logticks</code> function is that by default, ticks are placed on the outside of the panel and are controlled by the theme. To get good looking log-ticks on the outside, youâ€™d have to set clipping off and dodge the axis text. Whereas using log ticks as a guide takes care of most of the extra steps naturally.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">g</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">pressure</span>, <span class="fu">aes</span>(<span class="no">temperature</span>, <span class="no">pressure</span>)) +
  <span class="fu">geom_line</span>()

<span class="co"># Using annotation log-ticks</span>
<span class="no">g</span> + <span class="fu">scale_y_log10</span>() +
  <span class="fu">annotation_logticks</span>(<span class="kw">sides</span> <span class="kw">=</span> <span class="st">'l'</span>, <span class="kw">outside</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu">coord_cartesian</span>(<span class="kw">clip</span> <span class="kw">=</span> <span class="st">"off"</span>) +
  <span class="fu">theme</span>(<span class="kw">axis.text.y</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">margin</span> <span class="kw">=</span> <span class="fu">margin</span>(<span class="kw">r</span> <span class="kw">=</span> <span class="fl">10</span>)))

<span class="co"># Using axis_logticks, setting tick length equivalently</span>
<span class="no">g</span> + <span class="fu">scale_y_log10</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="st">"axis_logticks"</span>) +
  <span class="fu">theme</span>(<span class="kw">axis.ticks.length.y</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">"cm"</span>))</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-6-1.png" width="288"><img src="PositionGuides_files/figure-html/unnamed-chunk-6-2.png" width="288"></p>
<p>Inversely, you can also place the axis ticks on the inside with negative values for the <code>axis.ticks.length</code>, but you would need to dodge the axis text again.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">g</span> + <span class="fu">scale_y_log10</span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="st">"axis_logticks"</span>) +
  <span class="fu">theme</span>(<span class="kw">axis.ticks.length.y</span> <span class="kw">=</span> <span class="fu">unit</span>(-<span class="fl">0.3</span>, <span class="st">"cm"</span>),
        <span class="kw">axis.text.y</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">margin</span> <span class="kw">=</span> <span class="fu">margin</span>(<span class="kw">r</span> <span class="kw">=</span> <span class="fl">0.4</span>, <span class="kw">unit</span> <span class="kw">=</span> <span class="st">"cm"</span>)))</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-7-1.png" width="384"></p>
</div>
<div id="nested-relations" class="section level1">
<h1 class="hasAnchor">
<a href="#nested-relations" class="anchor"></a>Nested relations</h1>
<p>Discrete variables that have some kind of categories or interactions to them can be layed out in a nested fashion. This can be convenient to indicate for example group membership.</p>
<p>In the example below we use the <code><a href="https://rdrr.io/r/base/interaction.html">interaction()</a></code> function to paste together the name of the item and the group it belongs to, with a <code>"."</code> in between. The <code><a href="../reference/guide_axis_nested.html">guide_axis_nested()</a></code> function tries to split the labels on the <code>"."</code> symbol to tease apart the item and their group membership.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">item</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Coffee"</span>, <span class="st">"Tea"</span>, <span class="st">"Apple"</span>, <span class="st">"Pear"</span>, <span class="st">"Car"</span>),
  <span class="kw">type</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Drink"</span>, <span class="st">"Drink"</span>, <span class="st">"Fruit"</span>, <span class="st">"Fruit"</span>, <span class="st">""</span>),
  <span class="kw">amount</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span>),
  <span class="kw">stringsAsFactors</span> <span class="kw">=</span> <span class="fl">FALSE</span>
)

<span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="fu"><a href="https://rdrr.io/r/base/interaction.html">interaction</a></span>(<span class="no">item</span>, <span class="no">type</span>), <span class="no">amount</span>)) +
  <span class="fu">geom_col</span>() +
  <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"axis_nested"</span>)</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-8-1.png" width="384"></p>
<p>Note above that the ordering of the x-axis is different than the order of the input data. An alternative that can be tried is using the <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> function to paste together names. In the case below, the names are automatically ordered alphabetically, so the group membership information is disorganised with <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code>. Here, we use the <code>delim</code> argument to split the labels based on a delimiter. The extra tildes (~) are to show where the split happens.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">item</span>, <span class="st">"~nonsense~"</span>, <span class="no">type</span>), <span class="no">amount</span>)) +
  <span class="fu">geom_col</span>() +
  <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_axis_nested.html">guide_axis_nested</a></span>(<span class="kw">delim</span> <span class="kw">=</span> <span class="st">"nonsense"</span>))</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-9-1.png" width="384"></p>
<p>To counter some of the pains with <code><a href="https://rdrr.io/r/base/interaction.html">interaction()</a></code> and <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> in ordering the items, ggh4x has the <code><a href="../reference/weave_factors.html">weave_factors()</a></code> convenience function that attempts to preserve the natural order of factor levels in which they occur.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="fu"><a href="../reference/weave_factors.html">weave_factors</a></span>(<span class="no">item</span>, <span class="no">type</span>), <span class="no">amount</span>)) +
  <span class="fu">geom_col</span>() +
  <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"axis_nested"</span>)</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-10-1.png" width="384"></p>
<p>The looks of the indicator line can be controlled by the <code>ggh4x.axis.nestline</code> theme element (also <code>*.x</code> and <code>*.y</code> variants), which by default takes values from the axis ticks. In the example below, the indicator line is red because it takes the colour from the ticks, but is thicker because its own size is set larger. Also the text underneath the indicators can be made different with the <code>ggh4x.axis.nesttext.(x/y)</code> elements.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="fu"><a href="../reference/weave_factors.html">weave_factors</a></span>(<span class="no">item</span>, <span class="no">type</span>), <span class="no">amount</span>)) +
  <span class="fu">geom_col</span>() +
  <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"axis_nested"</span>) +
  <span class="fu">theme</span>(
    <span class="kw">axis.ticks</span> <span class="kw">=</span> <span class="fu">element_line</span>(<span class="kw">colour</span> <span class="kw">=</span> <span class="st">"red"</span>),
    <span class="kw">ggh4x.axis.nestline.x</span> <span class="kw">=</span> <span class="fu">element_line</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">2</span>),
    <span class="kw">ggh4x.axis.nesttext.x</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">colour</span> <span class="kw">=</span> <span class="st">"blue"</span>)
  )</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-11-1.png" width="384"></p>
<p>Lastly, the guide will also stack multiple group memberships.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">df</span>$<span class="no">type2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Consumables"</span>, <span class="fl">4</span>), <span class="st">"Vehicle"</span>)
<span class="no">df</span>$<span class="no">appletea</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Ingredient of apple tea"</span>, <span class="fl">2</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">NA</span>, <span class="fl">2</span>))

<span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="fu"><a href="../reference/weave_factors.html">weave_factors</a></span>(<span class="no">item</span>, <span class="no">type</span>, <span class="no">appletea</span>, <span class="no">type2</span>), <span class="no">amount</span>)) +
  <span class="fu">geom_col</span>() +
  <span class="fu">guides</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"axis_nested"</span>)</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-12-1.png" width="384"></p>
</div>
<div id="dendrograms" class="section level1">
<h1 class="hasAnchor">
<a href="#dendrograms" class="anchor"></a>Dendrograms</h1>
<p>Another thing people might want to indicate are hierarchical clustering relationships among variables. To accommodate this, there is <code>scale_(x/y)_dendrogram()</code>, which uses the <strong>ggdendro</strong> package convert a <code>hclust</code> object into a dendrogram. Since any set of scales should only be dependent on their aesthetics and cannot see other aesthetics, the dendrogram scales requires you to provide it with the result of a hierarchical clustering. By using the scale, it reorders the variables for you according to the clustering result, and places a dendrogram over the labels.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">reshape2</span>, <span class="kw">quietly</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">clusters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/hclust.html">hclust</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/dist.html">dist</a></span>(<span class="no">USArrests</span>), <span class="st">"ave"</span>)

<span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="kw">State</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">USArrests</span>),
            <span class="no">USArrests</span>)
<span class="no">df</span> <span class="kw">&lt;-</span> <span class="kw pkg">reshape2</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html">melt</a></span>(<span class="no">df</span>, <span class="kw">id.vars</span> <span class="kw">=</span> <span class="st">"State"</span>)

<span class="no">g</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="no">variable</span>, <span class="no">State</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="no">value</span>)) +
  <span class="fu">geom_raster</span>()
<span class="no">g</span> + <span class="fu"><a href="../reference/scale_dendrogram.html">scale_y_dendrogram</a></span>(<span class="kw">hclust</span> <span class="kw">=</span> <span class="no">clusters</span>)</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-13-1.png" width="480"></p>
<p>Since the dendrogram replaces the axis ticks, it uses these as theme element from which it takes the looks. The size of the dendrogram is also controlled by the tick length: it is ten times the <code>axis.tick.length</code> element.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">g</span> + <span class="fu"><a href="../reference/scale_dendrogram.html">scale_y_dendrogram</a></span>(<span class="kw">hclust</span> <span class="kw">=</span> <span class="no">clusters</span>) +
  <span class="fu">theme</span>(
  <span class="kw">axis.ticks.y</span> <span class="kw">=</span> <span class="fu">element_line</span>(<span class="kw">colour</span> <span class="kw">=</span> <span class="st">"forestgreen"</span>),
  <span class="kw">axis.ticks.length.y</span> <span class="kw">=</span> <span class="fu">unit</span>(<span class="fl">10</span>, <span class="st">"pt"</span>)
)</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-14-1.png" width="480"></p>
<p>There also is the <code><a href="../reference/guide_dendro.html">guide_dendro()</a></code> function to tune some of the guide behaviour. It is intended to be used within a <code>scale_(x/y)_dendrogram()</code> function.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">g</span> + <span class="fu"><a href="../reference/scale_dendrogram.html">scale_y_dendrogram</a></span>(<span class="kw">guide</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_dendro.html">guide_dendro</a></span>(<span class="kw">position</span> <span class="kw">=</span> <span class="st">"right"</span>),
                       <span class="kw">hclust</span> <span class="kw">=</span> <span class="no">clusters</span>)</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-15-1.png" width="480"></p>
<p>Using <code><a href="../reference/guide_dendro.html">guide_dendro()</a></code> outside dendrogram scales is not recommended, because that would break the relationship between the axis order and the dendrogram that is displayed. To discourage this use, it has been made slightly more inconvenient to use this function outside dendrogram scales: you manually have to supply the digested dendrogram. Notice below that the y-axis order and the dendrogram donâ€™t match and is their implied relationship is thus false.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="co"># Don't do this</span>
<span class="fu">ggplot</span>(<span class="no">df</span>, <span class="fu">aes</span>(<span class="no">variable</span>, <span class="no">State</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="no">value</span>)) +
  <span class="fu">geom_raster</span>() +
  <span class="fu">guides</span>(<span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="../reference/guide_dendro.html">guide_dendro</a></span>(<span class="kw">dendro</span> <span class="kw">=</span> <span class="kw pkg">ggdendro</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggdendro/man/dendro_data.html">dendro_data</a></span>(<span class="no">clusters</span>)))</pre></body></html></div>
<p><img src="PositionGuides_files/figure-html/unnamed-chunk-16-1.png" width="480"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Teun van den Brand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
